- hosts: 127.0.0.1
  connection: local
  tasks:
    - name: Add vSwitch for CTF VMs to HOST200
      vmware_vswitch:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        switch_name: CTF-vswitch
        nic_name: vmnic1
        mtu: 9000
        state: present
        validate_certs: False
    - name: Add vSwitch for CTF VMs to HOST201
      vmware_vswitch:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        switch_name: CTF-vswitch
        nic_name: vmnic1
        mtu: 9000
        state: present
        validate_certs: False
    - name: Add port_group for Router Link to HOST200
      vmware_portgroup:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        portgroup_name: CTF-RouterLink
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 108
        network_policy:
          promiscuous_mode: True
    - name: Add port_group for Router Link to HOST201
      vmware_portgroup:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        portgroup_name: CTF-RouterLink
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 108
        network_policy:
          promiscuous_mode: True
    - name: Add port_group for Guest Network to HOST200
      vmware_portgroup:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        portgroup_name: CTF-GuestNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 150
        network_policy:
          promiscuous_mode: True

    - name: Add port_group for Guest Network to HOST201
      vmware_portgroup:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        portgroup_name: CTF-GuestNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 150
        network_policy:
          promiscuous_mode: True
    - name: Add port_group for Red Team Network to HOST200
      vmware_portgroup:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        portgroup_name: CTF-RedTeamNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 130
        network_policy:
          promiscuous_mode: True

    - name: Add port_group for Red Team Network to HOST201
      vmware_portgroup:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        portgroup_name: CTF-RedTeamNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 130
        network_policy:
          promiscuous_mode: True
    - name: Add port_group for Secure Network to HOST200
      vmware_portgroup:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        portgroup_name: CTF-SecureNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 119
        network_policy:
          promiscuous_mode: True

    - name: Add port_group for Secure Network to HOST201
      vmware_portgroup:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        portgroup_name: CTF-SecureNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 119
        network_policy:
          promiscuous_mode: True
    - name: Add port_group for DMZ Network to HOST200
      vmware_portgroup:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        portgroup_name: CTF-DMZNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 120
        network_policy:
          promiscuous_mode: True

    - name: Add port_group for DMZ Network to HOST201
      vmware_portgroup:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        portgroup_name: CTF-DMZNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 120
        network_policy:
          promiscuous_mode: True

    - name: Add port_group for Branch Network to HOST200
      vmware_portgroup:
        hostname: 10.0.0.11
        username: root
        password: 22daDraf
        portgroup_name: CTF-BranchNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 118
        network_policy:
          promiscuous_mode: True

    - name: Add port_group for Branch Network to HOST201
      vmware_portgroup:
        hostname: 10.0.0.12
        username: root
        password: 22daDraf
        portgroup_name: CTF-BranchNet
        cluster_name: CTF
        switch_name: CTF-vswitch
        validate_certs: False
        vlan_id: 118
        network_policy:
          promiscuous_mode: True
